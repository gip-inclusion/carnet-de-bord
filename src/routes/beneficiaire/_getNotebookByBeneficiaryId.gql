query GetNotebookByBeneficiaryId($id: uuid!) {
	notebook(where: { beneficiaryId: { _eq: $id } }) {
		...notebookFragment
	}
}

query GetNotebookById($id: uuid!) {
	notebook(where: { id: { _eq: $id } }) {
		...notebookFragment
	}
}

fragment notebookFragment on notebook {
	id
	workSituation
	workSituationDate
	workSituationEndDate
	rightAre
	rightAss
	rightRsa
	rightRqth
	rightBonus
	contractType
	contractSignDate
	educationLevel
	wantedJobs {
		rome_code {
			id
			label
		}
	}
	geographicalArea
	beneficiary {
		address1
		address2
		cafNumber
		city
		dateOfBirth
		email
		firstname
		id
		lastname
		mobileNumber
		peNumber
		postalCode
	}
	members(where: { active: { _eq: true } }, order_by: { lastModifiedAt: desc_nulls_last }) {
		id
		memberType
		lastModifiedAt
		lastVisitedAt
		account {
			professional {
				id
				lastname
				firstname
				position
				email
				mobileNumber
				structure {
					id
					name
					address1
					address2
					postalCode
					city
				}
			}
		}
	}
	focuses(order_by: { createdAt: desc_nulls_first }) {
		theme
		situations
		creator {
			professional {
				firstname
				lastname
				structure {
					name
				}
			}
		}
		targets(where: { status: { _eq: "in_progress" } }, order_by: { createdAt: desc_nulls_first }) {
			target
			createdAt
			creator {
				professional {
					firstname
					lastname
					structure {
						name
					}
				}
			}
			actions(
				where: { status: { _eq: "in_progress" } }
				order_by: { createdAt: desc_nulls_first }
			) {
				action
				createdAt
				status
				creator {
					professional {
						firstname
						lastname
						structure {
							name
						}
					}
				}
			}
		}
	}
}
