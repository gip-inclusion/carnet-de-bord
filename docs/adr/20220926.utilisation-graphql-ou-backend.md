# Quand utilisé graphql ou l'api backend

## :construction: État

En cours

## :stethoscope: Contexte

Actuellement, nous avons 2 moyens d'accéder aux données de la base postgres:
- via une api graphql  (hasura)
- via une api Rest (backend)

Il peut être compliqué pour une nouvelle personne de savoir lequel de ces 2 moyens serait le plus approprié.
Nous souhaitons clarifier ce point.

## :sparkles: Décision

Pour les opérations de lecture, que ce soit depuis le front ou le backend, nous recommandons d'utiliser l'api graphql.
Pour les opérations d'écriture, si l'ensemble des opérations tient dans une `mutation` alors nous recommandons d'utiliser l'api graphql.
Pour les opérations d'imports massifs, d'opérations impliquant des effets de bord (ex: envoi de mail) et ou des requetes complexes
que l'api graphql ne permet d'exprimer dans une seule `query` ou `mutation`, nous recommandons la création d'un endpoint dédié dans l'api backend.
